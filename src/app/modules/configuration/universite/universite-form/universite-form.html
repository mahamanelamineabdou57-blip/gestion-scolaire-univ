<main id="main" class="main">
  <div class="pagetitle">
    <h1>{{ universite.nom || 'Nouvelle université' }}</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a [routerLink]="['/configuration/universite']">Configuration</a>
        </li>
        <li class="breadcrumb-item active">{{ getLink() }}</li>
      </ol>
    </nav>
  </div>

  <section class="section">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-header uas-bg-color d-flex justify-content-between align-items-center">
            <div>
              <h3 class="m-0">
                Fiche d’informations
                <span class="badge ms-2" [ngClass]="getBadgeClasse()">
                  {{ getBadgeTexte() }}
                </span>
              </h3>
            </div>

            @if (isEditMode) {
              <div class="form-check form-switch d-block mt-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="editSwitch"
                  [checked]="!readOnly"
                  (change)="toggleReadOnly()"
                />
                <label class="form-check-label ms-2" for="editSwitch">
                  Activer la modification
                </label>
              </div>
            }
          </div>

          <div class="card-body">
            <form #form="ngForm" (ngSubmit)="update(form)">
              <!-- Tabs -->
              <ul
                class="nav nav-tabs nav-tabs-bordered d-flex mt-3"
                id="borderedTabJustified"
                role="tablist"
              >
                <li class="nav-item flex-fill" role="presentation">
                  <button
                    class="nav-link w-100 active"
                    id="informations"
                    data-bs-toggle="tab"
                    data-bs-target="#tab-info"
                    type="button"
                    role="tab"
                  >
                    Informations générales
                  </button>
                </li>
                <li class="nav-item flex-fill" role="presentation">
                  <button
                    class="nav-link w-100"
                    id="logo"
                    data-bs-toggle="tab"
                    data-bs-target="#tab-logo"
                    type="button"
                    role="tab"
                  >
                    Logo
                  </button>
                </li>
              </ul>

              <div class="tab-content pt-2">
                <!-- Informations générales -->
                <div class="tab-pane fade show active" id="tab-info">
                  <div class="col-sm-12 mt-3">
                    <div class="form-floating my-2">
                      <input
                        type="text"
                        class="form-control"
                        name="nom"
                        [(ngModel)]="universite.nom"
                        placeholder="Nom"
                        [disabled]="readOnly"
                        required
                      />
                      <label>Nom de l'université</label>
                    </div>
                    <div class="form-floating my-2">
                      <input
                        type="text"
                        class="form-control"
                        name="telephone"
                        [(ngModel)]="universite.telephone"
                        placeholder="Téléphone"
                        [disabled]="readOnly"
                        required
                      />
                      <label>Téléphone</label>
                    </div>
                    <div class="form-floating my-2">
                      <input
                        type="email"
                        class="form-control"
                        name="email"
                        [(ngModel)]="universite.email"
                        placeholder="Email"
                        [disabled]="readOnly"
                        required
                      />
                      <label>Email</label>
                    </div>
                    <div class="form-floating my-2">
                      <input
                        type="text"
                        class="form-control"
                        name="adresse"
                        [(ngModel)]="universite.adresse"
                        placeholder="Adresse"
                        [disabled]="readOnly"
                        required
                      />
                      <label>Adresse</label>
                    </div>
                  </div>
                </div>

                <!-- Logo -->
                <div class="tab-pane fade" id="tab-logo">
                  <div class="mt-3">
                    <label>Choisissez le logo</label>
                    <input
                      class="form-control"
                      type="file"
                      (change)="onFileChange($event)"
                      [disabled]="readOnly"
                    />
                    @if (logoPreview) {
                      <div class="mt-2">
                        <img [src]="logoPreview" alt="Logo" width="150" />
                      </div>
                    }
                  </div>
                </div>
              </div>

              <div class="mt-3 d-flex justify-content-end">
                <button
                  type="submit"
                  class="btn uas-btn-color-alt w-100"
                  [disabled]="readOnly"
                >
                  {{ isEditMode ? 'Mettre à jour' : 'Enregistrer' }}
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
