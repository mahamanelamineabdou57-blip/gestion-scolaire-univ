<main id="main" class="main">
  <div class="pagetitle">
    <h1>{{ isEditMode ? "Modifier une carte" : "Nouvelle carte" }}</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a [routerLink]="['/scolarite/carte']">Cartes</a>
        </li>
        <li class="breadcrumb-item active">{{ getLink() }}</li>
      </ol>
    </nav>
  </div>

  <section class="section">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <!-- Header -->
          <div
            class="card-header uas-bg-color d-flex justify-content-between align-items-center"
          >
            <div>
              <h3 class="m-0">
                Informations de l'étudiant
                <span
                  *ngIf="isEditMode"
                  class="badge ms-2"
                  [ngClass]="getBadgeClasse()"
                >
                  {{ getBadgeTexte() }}
                </span>
              </h3>
            </div>
            <div
              *ngIf="hasInterface('Faculte', 'ecriture')"
              class="form-check form-switch"
            >
              <div *ngIf="isEditMode" class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="editSwitch"
                  (change)="toggleReadOnly()"
                  [checked]="!readOnly"
                />
                <label class="form-check-label ms-2" for="editSwitch"
                  >Activer la modification</label
                >
              </div>
            </div>
          </div>

          <!-- Body -->
          <div class="card-body">
            <form #form="ngForm" (ngSubmit)="onSubmit()">
              <div class="col-sm-12 mt-3">
                <!-- Nom -->
                <div class="form-floating my-3">
                  <input
                    type="text"
                    class="form-control"
                    id="inscriptions_id"
                    [(ngModel)]="carte.inscriptions_id"
                    name="inscriptions_id"
                    required
                    [disabled]="readOnly"
                    placeholder="Numéro Inscription"
                  />
                  <label for="inscriptions_id">Numéro Inscription</label>
                </div>
              </div>
              <!-- Faculté -->
              <div class="form-floating my-3">
                <select
                  class="form-select"
                  name="status"
                  [disabled]="readOnly"
                  required
                >
                  <option value="" disabled>Sélectionnez le statut</option>
                  <option value="active">Active</option>
                  <option value="inactive">Inactive</option>
                </select>
                <label>Statut</label>
              </div>

              <!-- Actions -->
              <div class="row m-3">
                <button
                  *ngIf="hasInterface('Faculte', 'ecriture')"
                  type="submit"
                  class="btn uas-btn-color-alt col me-2"
                  [disabled]="readOnly"
                >
                  <i class="bi bi-save mx-2"></i>
                  {{ isEditMode ? "Modifier" : "Enregistrer" }}
                </button>
                <button
                  type="button"
                  class="btn uas-btn-color col"
                  (click)="cancel()"
                >
                  <i class="bi bi-arrow-left-circle mx-2"></i> Retour
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
